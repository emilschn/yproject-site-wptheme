jQuery(document).ready(function(e){YPUIFunctions.initUI(),WDGFormsFunctions.init()}),JSHelpers=(jQuery,{urldecode:function(e){return decodeURIComponent((e+"").replace(/\+/g,"%20"))},formatTextToNumber:function(e){var t=Number(e.split(",").join(".").split(" ").join(""));return isNaN(t)&&(t=0),t},formatNumber:function(e,t){e===parseInt(e,10)&&(e=parseFloat(e).toFixed(2));var n=e.toString(),i=(n=(n=n.replace(/\d(?=(\d{3})+\.)/g,"$& ")).split(".").join(",")).split(",");"00"===i[1]&&(n=i[0]);var o=n;return""!==t&&(o+=" "+t),o}}),YPUIFunctions=function(e){return{currentLightbox:"",currentRequest:"",initUI:function(){if(WDGLightboxFunctions.init(),WDGNavFunctions.init(),e(document).scroll(function(){""===YPUIFunctions.currentLightbox&&(e(document).scrollTop()>50?(e("nav#main").css("marginTop",0),e(document).scrollTop()>250?e(".responsive-fixed").addClass("fixed"):e(".responsive-fixed").removeClass("fixed")):e("nav#main").css("marginTop",10))}),e(".expandator").css("cursor","pointer"),e(".expandable").not(".default-expanded").hide(),e(".expandator").click(function(){var t=e(this).data("target");e("#extendable-"+t).is(":visible")?e("#extendable-"+t).hide():e("#extendable-"+t).show()}),e("footer span.footer-subtitle.clickable").click(function(){e(window).width()<998&&(e(this).next().is(":visible")?(e(this).removeClass("expanded"),e(this).next().hide()):(e(this).addClass("expanded"),e(this).next().show()))}),e(".impacts-container .impact-logo").mouseover(function(){var t=YPUIFunctions.findPos(this).x;e(this).next().addClass("visible").removeClass("invisible"),e(this).next().css("left",t)}),e(".impacts-container .impact-logo").mouseout(function(){e(this).next().addClass("invisible").removeClass("visible")}),e(".home_video .button-video, .home_video .button-video-shadows").click(function(){e(".home_video .button-video, .home_video .button-video-shadows").hide();var t=".home_video .video-container",n="320",i="180";e(window).width()>570?(t+=".w570",n="570",i="321"):t+=".w320",e(t).append('<iframe src="https://www.youtube.com/embed/QJmhrCG5acU?feature=oembed&amp;rel=0&amp;wmode=transparent&amp;autoplay=1" style="border: none" allow="autoplay; encrypted-media" width="'+n+'" height="'+i+'"></iframe>'),e(t).show()}),e("#cookies-alert").length>0){"1"===YPUIFunctions.getCookie("hidecookiealert")&&e("#cookies-alert").hide(),e("#cookies-alert-close").click(function(){e("#cookies-alert").hide();var t=new Date;t.setTime(t.getTime()+864e7);var n="; expires="+t.toGMTString();document.cookie="hidecookiealert=1"+n+"; path=/"})}e("#fundingproject").val()&&(e("#goalsum_fixe").click(function(){e("#goalsum_flexible_param").hide(),e("#goalsum_fixe_param").show()}),e("#goalsum_flexible").click(function(){e("#goalsum_flexible_param").show(),e("#goalsum_fixe_param").hide()}),e("#goal_search").change(function(){e("#goal").val(Math.round(e("#goal_search").val()*e("#campaign_multiplier").val())),e("#goalsum_campaign_multi").text(e("#goal").val()+e("#monney").val())}),e("#minimum_goal_search").change(function(){e("#minimum_goal").val(Math.round(e("#minimum_goal_search").val()*e("#campaign_multiplier").val())),e("#goalsum_min_campaign_multi").text(e("#minimum_goal").val()+e("#monney").val())}),e("#maximum_goal_search").change(function(){e("#maximum_goal").val(Math.round(e("#maximum_goal_search").val()*e("#campaign_multiplier").val())),e("#goalsum_max_campaign_multi").text(e("#maximum_goal").val()+e("#monney").val())}),e(".radiofundingtype").change(function(){e("#fundingdevelopment_param").show(),"fundingproject"==e("input[name=fundingtype]:checked").val()&&e(".min_amount_value").text(e("#min_amount_project").val()),"fundingdevelopment"==e("input[name=fundingtype]:checked").val()&&e(".min_amount_value").text(e("#min_amount_development").val()),"fundingdonation"==e("input[name=fundingtype]:checked").val()&&(e("#fundingdevelopment_param").hide(),e(".min_amount_value").text(e("#min_amount_donation").val()))})),e("#company_status").length>0&&e("#company_status").change(function(){"Autre"==e("#company_status").val()?e("#company_status_other_zone").show():e("#company_status_other_zone").hide()}),e(".wp-editor-wrap")[0]&&setInterval(YPUIFunctions.onRemoveUploadInterval,1e3),e(".alert-confirm").click(function(t){t.preventDefault(),confirm(e(this).data("alertconfirm"))&&(window.location.href=e(this).attr("href"))}),e(".ajax-investments-load").length>0&&(campaign_id=e(".ajax-investments-load").attr("data-value"),YPUIFunctions.getInvestments(campaign_id,!1)),e(".ajax-investments-load-short").length>0&&(campaign_id=e(".ajax-investments-load-short").attr("data-value"),YPUIFunctions.getInvestments(campaign_id,!0)),e("body.home.page").length>0&&e(".wdg-component-projects-preview .project-slider").length>0&&(e(".wdg-component-projects-preview .block-projects").width((e(".wdg-component-projects-preview .project-container").width()+5)*e(".wdg-component-projects-preview .project-container").length),e(".wdg-component-projects-preview .project-slider").scrollLeft((e(".wdg-component-projects-preview .block-projects").width()-e(".wdg-component-projects-preview .project-slider").width())/2)),e(".projects-current .wdg-component-projects-preview .project-slider .block-projects").width()>e(".projects-current .wdg-component-projects-preview .project-slider").width()&&e(".projects-current .wdg-component-projects-preview .project-slider").length>0&&(e(".projects-current .wdg-component-projects-preview .block-projects").width((e(".projects-current .wdg-component-projects-preview .project-container").width()+5)*e(".projects-current .wdg-component-projects-preview .project-container").length),e(".projects-current .wdg-component-projects-preview .project-slider").scrollLeft((e(".projects-current .wdg-component-projects-preview .block-projects").width()-e(".projects-current .wdg-component-projects-preview .project-slider").width())/2),e(".projects-funded .wdg-component-projects-preview .block-projects").width(e(".projects-funded .wdg-component-projects-preview .project-container").width()*e(".projects-funded .wdg-component-projects-preview .project-container.cat-entreprises").length)),e(".projects-after-end-date .wdg-component-projects-preview .project-slider .block-projects").width()>e(".projects-after-end-date .wdg-component-projects-preview .project-slider").width()&&e(".projects-after-end-date .wdg-component-projects-preview .project-slider").length>0&&(e(".projects-after-end-date .wdg-component-projects-preview .block-projects").width((e(".projects-after-end-date .wdg-component-projects-preview .project-container").width()+5)*e(".projects-after-end-date .wdg-component-projects-preview .project-container").length),e(".projects-after-end-date .wdg-component-projects-preview .project-slider").scrollLeft((e(".projects-after-end-date .wdg-component-projects-preview .block-projects").width()-e(".projects-after-end-date .wdg-component-projects-preview .project-slider").width())/2)),e("#project-filter").length>0&&(e("#project-filter > span").click(function(){e("#project-filter span").hasClass("show")?e("#project-filter span").removeClass("show"):e("#project-filter span").addClass("show"),e("#project-filter select").toggle()}),e("#project-filter .project-filter-select").change(function(){e("#loader-project-list").show(),setTimeout(function(){e("#loader-project-list").hide();var t=e("#project-filter-step").val(),n=e("#project-filter-location").val(),i=e("#project-filter-impact").val();YPUIFunctions.refreshProjectList(t,n,i)},500)}),e("#project-filter .project-filter-select").trigger("change"),e("div.padder.projects-funded button").click(function(){var t=e("div.padder.projects-funded .block-projects").height()+620;e("div.padder.projects-funded .block-projects").css("max-height",t);t>=620*Math.ceil(e("div.padder.projects-funded .block-projects .project-container").length/4)&&e("div.padder.projects-funded button").hide()})),e(".avoid-enter-validation").on("keyup keypress",function(e){if(13===(e.keyCode||e.which))return e.preventDefault(),!1}),e(".copy-clipboard").click(function(t){t.stopPropagation();var n=e(this).data("clipboard");e("#"+n).after('<input id="new-element-to-select" type="text" value="'+e("#"+n).text()+'">'),e("#new-element-to-select").select(),document.execCommand("copy"),e("#new-element-to-select").remove(),e(this).siblings("span.hidden").show()})},findPos:function(e){var t=y=0;if(e.offsetParent)for(t=e.offsetLeft,y=e.offsetTop;e===e.offsetParent;)t+=e.offsetLeft,y+=e.offsetTop;return{x:t,y:y}},getInvestments:function(t,n){YPUIFunctions.currentRequest=e.ajax({type:"POST",url:ajax_object.ajax_url,data:{action:"get_investments_data",id_campaign:t,is_short_version:n?"1":"0"}}).done(function(n){YPUIFunctions.currentRequest="",inv_data=JSON.parse(n),e.each(inv_data,function(t,n){"investors_string"==t&&(n=n.split("&amp;").join("&")),e(".data-inv-"+t).html(n)}),e(".ajax-data-inv-loader-img").slideUp(),e("#ajax-contacts-load").length>0&&wdgCampaignDashboard.getContactsTable(JSON.stringify(inv_data),t)}).fail(function(){})},onRemoveUploadInterval:function(){e(".media-frame-menu")[0]&&e(".media-frame-menu").remove(),e(".media-frame-router")[0]&&e(".media-frame-router").show()},refreshProjectPreview:function(){e(".home-large-project").length>0&&e(".home-large-project").each(function(){var t=e(this).find(".description-zone"),n=e(this).find(".description-summary"),i=e(this).find(".description-discover"),o=e(this).find(".video-zone"),a=e(this).find(".description-middle"),r=e(this).find(".video-zone>iframe");r.length>0?e(t).height(e(r).height()):e(t).height(e(o).height());var s=e(t).height()-e(n).height()-e(i).height();e(a).css("top",e(n).height()-e(a).height()/2+s/2)})},refreshProjectList:function(t,n,i){var o=n.split(",");e(".wdg-component-projects-preview .block-projects .project-container").show(),e(".wdg-component-projects-preview .block-projects .project-container").each(function(){var a=e(this).data("categories");"all"!==t&&e(this).data("step")!==t&&e(this).hide(),"all"!==n&&-1===o.indexOf(e(this).data("location").toString())&&e(this).hide(),"all"!==i&&-1===a.indexOf(i)&&e(this).hide()})},getCookie:function(e){for(var t=e+"=",n=document.cookie.split(";"),i=0;i<n.length;i++){for(var o=n[i];" "===o.charAt(0);)o=o.substring(1);if(0===o.indexOf(t))return o.substring(t.length,o.length)}return""},getStringsSimilarity:function(e,t){var n=e,i=t;e.length<t.length&&(n=t,i=e);var o=n.length;if(0==o)return 1;return(o-YPUIFunctions.getStringsDistance(n,i))/parseFloat(o)},getStringsDistance:function(e,t){e=e.toLowerCase(),t=t.toLowerCase();for(var n=new Array,i=0;i<=e.length;i++){for(var o=i,a=0;a<=t.length;a++)if(0==i)n[a]=a;else if(a>0){var r=n[a-1];e.charAt(i-1)!=t.charAt(a-1)&&(r=Math.min(Math.min(r,o),n[a])+1),n[a-1]=o,o=r}i>0&&(n[t.length]=o)}return n[t.length]}}}(jQuery);var WDGNavFunctions=function(e){return{isConnectionChecked:!1,init:function(){e("nav#main a.lines").click(function(t){e("nav#main a.lines").removeClass("current"),e(this).addClass("current"),e(this).addClass("select-nav")}),e(".btn-user").click(function(t){"#"==e(this).attr("href")&&(t.preventDefault(),e(".btn-user").hasClass("active")?(e(".btn-user").removeClass("active").addClass("inactive"),e("#submenu-user").hide()):(e(".btn-user").addClass("active").removeClass("inactive"),e("#submenu-user").show(),e("#btn-search, #btn-burger").removeClass("active").addClass("inactive"),e("#submenu-search").hide()))}),e("nav#main .btn-user").hasClass("not-connected")&&WDGNavFunctions.checkUserConnection(),e("#btn-search, #btn-burger").click(function(t){t.preventDefault(),e("#btn-search, #btn-burger").hasClass("active")?(e("#btn-search, #btn-burger").removeClass("active").addClass("inactive"),e("#submenu-search").hide()):(e("#btn-search, #btn-burger").addClass("active").removeClass("inactive"),e("#submenu-search").show(),e("#submenu-search-input").focus(),e(".btn-user").removeClass("active").addClass("inactive"),e("#submenu-user").hide(),0==e("#submenu-search ul.submenu-list li").length&&e.ajax({type:"POST",url:ajax_object.ajax_url,data:{action:"get_searchable_projects_list"}}).done(function(t){for(var n=JSON.parse(t),i=n.length,o=0;o<i;o++)e("#submenu-search ul.submenu-list").append('<li class="hidden"><a href="https://www.wedogood.co/'+n[o].url+'">'+n[o].name+'<span class="hidden">'+n[o].url+" "+n[o].organization_name+"</span></a></li>");e("#submenu-search-input").trigger("keyup")}))}),e("#submenu-search-input").keyup(function(t){function n(){WDGGETFUNKY_MARGINLEFT*=-1,e("#container div").animate({marginLeft:WDGGETFUNKY_MARGINLEFT},2e3,"swing",function(){n()})}if("Enter"===t.key)e("#submenu-search .submenu-list li a").each(function(){if(e(this).is(":visible")){var t=e(this).attr("href");return window.location=t,!1}});else{var i=e("#submenu-search-input").val().toLowerCase();if(e("#submenu-search .submenu-list li").addClass("hidden"),e(".empty-list-info").addClass("hidden"),""!=i){var o=!1,a=i.split("-").join(" ").split(" ");e("#submenu-search .submenu-list li").each(function(){var t=e(this).find("a").text().toLowerCase();if(t.indexOf(i)>-1&&(e(this).removeClass("hidden"),o=!0),!o){for(var n=t.split("-").join(" ").split(" "),r=!1,s=0;s<a.length;s++){if(a[s].length>2)for(var c=0;c<n.length;c++)if(void 0!=n[c]&&YPUIFunctions.getStringsSimilarity(n[c],a[s])>.6){r=!0;break}if(r)break}r&&(e(this).removeClass("hidden"),o=!0)}}),o||e(".empty-list-info").removeClass("hidden")}e("#submenu-search").height("auto"),"get funky!"===i&&(e("#container").empty(),e("#container").append('<div class="align-center" style="padding-top: 80px;"><iframe width="560" height="315" src="https://www.youtube.com/embed/kxopViU98Xo?rel=0&autoplay=1" frameborder="0" allowfullscreen></iframe></div>'),WDGGETFUNKY_MARGINLEFT=500,n())}}),e("#menu .btn-user").click(function(){""!==e(".model-form #identifiant").val()&&""!==e(".model-form #password").val()&&WDGNavFunctions.showOkConnect()}),e(".model-form #identifiant").bind("keypress click",function(){WDGNavFunctions.showOkConnect()}),e(".model-form #password").bind("keypress click",function(){WDGNavFunctions.showOkConnect()}),e(window).mouseup(function(t){var n=e("#submenu-user"),i=e("#menu .btn-user"),o=e("#menu .btn-user img"),a=e("#submenu-search"),r=e("#menu #btn-search"),s=e("#menu #btn-search img"),c=e("#btn-burger"),l=e("#btn-burger img");n.is(t.target)||i.is(t.target)||o.is(t.target)||"block"!==n.css("display")||0!==n.has(t.target).length?a.is(t.target)||r.is(t.target)||s.is(t.target)||l.is(t.target)||"block"!==a.css("display")||0!==a.has(t.target).length||(a.hide(),r.removeClass("active").addClass("inactive"),c.removeClass("active").addClass("inactive")):(n.hide(),i.removeClass("active").addClass("inactive"))}),e(".social_connect_login_facebook").click(function(t){t.preventDefault(),e(".social_connect_login_facebook_loading").show(),e.ajax({type:"POST",url:ajax_object.ajax_url,data:{action:"get_connect_to_facebook_url",redirect:e(".social_connect_login_facebook").data("redirect")}}).done(function(e){e.indexOf("http")>-1?window.location=e:alert("Facebook Connection URL Error")}).fail(function(){alert("Facebook Connection Error")}).always(function(){e(".social_connect_login_facebook_loading").hide()})})},showOkConnect:function(){e(".model-form .submit-center").css("display","inline"),e(".model-form input#password").addClass("pwd_submit"),e(".model-form input.connect").addClass("ok_valid")},checkUserConnection:function(){if(!WDGNavFunctions.isConnectionChecked){WDGNavFunctions.isConnectionChecked=!0;var t="";e("#content").length>0&&void 0!==e("#content").data("campaignstatus")&&"funded"===e("#content").data("campaignstatus")&&(t=e("#content").data("campaignid")),e.ajax({type:"POST",url:ajax_object.ajax_url,data:{action:"get_current_user_info",pageinfo:t}}).done(function(t){if("0"===t)e("#submenu-user.not-connected .menu-loading-init").hide(),e("#submenu-user.not-connected .menu-connection-forms").show();else{var n=JSON.parse(t);e("#menu .btn-user").addClass("connected").removeClass("not-connected"),"1"==n.userinfos.display_need_authentication&&e("#menu .btn-user").addClass("needs-authentication"),e("#menu .btn-user img").remove(),e("#menu .btn-user").text("Mon compte"),e("#submenu-user.not-connected .menu-loading-init").hide(),e("#submenu-user.not-connected .menu-connected #submenu-user-hello .hello-user-name").html(n.userinfos.username);for(var i=n.projectlist.length,o=0;o<i;o++)itemProject=n.projectlist[o],e("#submenu-user.not-connected .menu-connected .submenu-list").append('<li><a href="'+itemProject.url+'" class="'+("1"===itemProject.display_need_authentication?"needs-authentication":"")+'">'+itemProject.name+"</a></li>");if("1"==n.userinfos.display_need_authentication&&e("#submenu-user.not-connected .menu-connected #button-logout a").addClass("needs-authentication"),e("#submenu-user.not-connected .menu-connected #button-logout a").attr("href",n.userinfos.logout_url),e("#submenu-user.not-connected .menu-connected").show(),void 0!=n.context&&void 0!=n.context.dashboard_url&&0==e("#content .project-admin").length){for(var a=n.scripts.length,o=0;o<a;o++)e("body").append('<script type="text/javascript" src="'+n.scripts[o]+'"><\/script>');e("#content").append('<div class="project-admin"></div>'),e("#content .project-admin").append('<a href="'+n.context.dashboard_url+'" class="btn-dashboard">Tableau de bord</a>'),e(".zone-edit").length>0?e("#content .project-admin").append('<div id="wdg-edit-project" class="btn-edit"></div>'):e("#content .project-admin").append('<div id="wdg-remove-cache" class="btn-edit"></div>'),ProjectEditor.isInit=!1,ProjectEditor.init()}dataLayer.push({user_id:n.userinfos.userid})}wdg_gtm_call()})}}}}(jQuery),WDGLightboxFunctions=function(e){return{init:function(){if(e(".wdg-lightbox").length>0){e(".wdg-lightbox").each(function(){"1"==e(this).data("autoopen")&&WDGLightboxFunctions.displaySingle(e(this).attr("id").split("wdg-lightbox-")[1])}),e(".wdg-button-lightbox-open").not("#wdg-lightbox-newproject .wdg-button-lightbox-open").click(function(){WDGLightboxFunctions.displaySingle(e(this).data("lightbox"))}),e(".wdg-lightbox .wdg-lightbox-button-close a").click(function(e){e.preventDefault(),WDGLightboxFunctions.hideAll()}),e(".wdg-lightbox #wdg-lightbox-welcome-close").click(function(e){WDGLightboxFunctions.hideAll()}),e(".wdg-lightbox .wdg-lightbox-click-catcher").click(function(t){e(this).hasClass("disable")||WDGLightboxFunctions.hideAll()});var t=window.location.hash.substring(1);-1===t.indexOf("=")&&e("#wdg-lightbox-"+t).length>0&&WDGLightboxFunctions.displaySingle(t)}if(e(".timeout-lightbox").length>0){var n=2e3;e(".timeout-lightbox").data("duration")>0&&(n=e(".timeout-lightbox").data("duration")),setTimeout(function(){e(".timeout-lightbox").fadeOut()},n),e(".timeout-lightbox .wdg-lightbox-padder").click(function(){e(this).parent().hide()})}if(e("#wdg-lightbox-connexion").length>0&&e(".wdg-button-lightbox-open").click(function(){e("#wdg-lightbox-connexion .redirect-page").attr("value",e(this).data("redirect"))}),e("#wdg-lightbox-register").length>0&&e(".wdg-button-lightbox-open").click(function(){e("#wdg-lightbox-register .redirect-page").attr("value",e(this).data("redirect"))}),e("#newproject_form").length>0){if(e("#wdg-lightbox-newproject #connect-form .wdg-button-lightbox-open").click(function(t){t.preventDefault(),e("#wdg-lightbox-newproject #connect-form").hide(),e("#wdg-lightbox-newproject #newproject-register-user").show();var n=e("#wdg-lightbox-newproject #newproject-register-user form").attr("action");n=n.split("#register").join("#newproject"),e("#wdg-lightbox-newproject #newproject-register-user form").attr("action",n)}),e("#wdg-lightbox-newproject #newproject-register-user .wdg-button-lightbox-open").click(function(t){t.preventDefault(),e("#wdg-lightbox-newproject #newproject-register-user").hide(),e("#wdg-lightbox-newproject #connect-form").show()}),e("#newproject_form input#new-company-name").val(" "),e("#newproject_form div#field-new-company-name").hide(),e("#newproject_form select[name=company-name]").length>0&&(e("#newproject_form input#email-organization").val(" "),e("#newproject_form div#field-email-organization").hide()),""===e("#newproject_form input#company-name").val()&&e("#newproject_form #project-name").val(""),e("#newproject_form #select-company-name").on("keyup change",function(){e("#newproject_form div#field-new-company-name").hide(),e("#newproject_form div#field-email-organization").hide();var t="";if(e("#newproject_form input#company-name").length>0&&""!==e("#newproject_form input#company-name").val())t=e("#newproject_form input#company-name").val(),e("#newproject_form #project-name").val("Projet de "+t),e("#newproject_form input#new-company-name").val(" "),e("#newproject_form input#email-organization").val(" ");else if(e("#newproject_form select[name=company-name]").length>0){"new_orga"!==e("#newproject_form select[name=company-name] option:selected").val()?(t=e("#newproject_form select[name=company-name] option:selected").text(),e("#newproject_form #project-name").val("Projet de "+t),e("#newproject_form input#new-company-name").val(" "),e("#newproject_form input#email-organization").val(" ")):(e("#newproject_form input#new-company-name").val(""),e("#newproject_form #project-name").val(""),e("#newproject_form div#field-new-company-name").show(),e("#newproject_form input#new-company-name").on("keyup change",function(){var t=e("#newproject_form input#new-company-name").val();""!=t?e("#newproject_form #project-name").val("Projet de "+t):e("#newproject_form #project-name").val("")}),e("#newproject_form input#email-organization").val(""),e("#newproject_form input#new-company-name").val(""),e("#newproject_form div#field-email-organization").show())}}),e("#newproject_form input#new-company-name").focus(function(){e("#newproject_form input#new-company-name").val("")}),""!==e("#newproject_form #company-name").val()){var i=e("#newproject_form #company-name option:selected").text();e("#newproject_form #project-name").val("Projet de "+i)}e("input, textarea","#newproject_form").keyup(function(){e("#newProject_button").find("button").prop("disabled",e("input, textarea","#newproject_form").filter(function(){return""==e(this).val()}).length>0||!e("#project-terms").is(":checked"))}),e("input, textarea","#newproject_form").trigger("keyup"),e("#project-terms").change(function(){e("input, textarea","#newproject_form").trigger("keyup")}),e("#newproject_form").submit(function(){e("#newProject_button").find(".button-text").hide(),e("#newProject_button").find(".button-waiting").show(),e("#newProject_button button").prop("disabled",!0)})}},displaySingle:function(t){if(""==t)return FALSE;"function"==typeof ga&&(ga("set",{page:document.location.pathname+"#"+t,title:document.title+" | "+t}),ga("send","pageview")),e(".wdg-lightbox").hide(),e("#wdg-lightbox-"+t).show(),"1"==e("#wdg-lightbox-"+t).data("scrolltop")&&WDGLightboxFunctions.scrollTop(e(".wdg-lightbox-padder")),YPUIFunctions.currentLightbox=t},hideAll:function(){e(".wdg-lightbox").hide(),YPUIFunctions.currentLightbox=""},scrollTop:function(t){e(".wdg-lightbox-padder").scrollTop(t.offset().top-75)}}}(jQuery),WDGFormsFunctions=function($){return{init:function(){WDGFormsFunctions.initSaveButton(),WDGFormsFunctions.initCheckboxes(),WDGFormsFunctions.initRateCheckboxes(),WDGFormsFunctions.initDatePickers(),WDGFormsFunctions.initTextInput(),WDGFormsFunctions.initFileInput(),WDGFormsFunctions.initSelectMultiple()},initSaveButton:function(){$(".wdg-lightbox-ref .ajax-form button.save").click(function(e){e.preventDefault(),$(this).siblings(".loading").show(),$(this).siblings("button").hide(),$(this).hide();var t=$(this).parent().parent().parent().attr("id");WDGFormsFunctions.postForm("#"+t,WDGFormsFunctions.postFormCallback,this)}),$(".ajax-form button.save").click(function(e){e.preventDefault(),$(this).siblings(".loading").show(),$(this).siblings("button").hide(),$(this).hide();var t=$(this).parent().parent().attr("id");WDGFormsFunctions.postForm("#"+t,WDGFormsFunctions.postFormCallback,this)}),$(".db-form button.confirm").click(function(e){window.confirm("Etes-vous sÃ»rs de vouloir enregistrer ces modifications ?")||(e.stopPropagation(),e.preventDefault())}),$(".wdg-lightbox button.close, .wdg-lightbox-ref button.close").click(function(e){WDGLightboxFunctions.hideAll()}),$(".wdg-lightbox button.redirect, .wdg-lightbox-ref button.redirect").click(function(e){window.location=$(this).data("redirecturl")})},initCheckboxes:function(){$(".db-form.v3 input[type=checkbox]").length>0&&$(".db-form.v3 input[type=checkbox]").each(function(){$(this).hasClass("rate")||$(this).parent().hasClass("selectit")||($(this).parent().children("a").click(function(e){e.stopImmediatePropagation()}),$(this).parent().click(function(e){"1"!=$(this).data("keepdefault")&&e.preventDefault();var t=$(this).children("input[type=checkbox]")[0];t.checked=!t.checked,$(this).parent().hasClass("select-multiple-items")&&WDGFormsFunctions.refreshSelectMultiple($(this).parent().parent())}))})},initRateCheckboxes:function(){$(".db-form.v3 input[type=checkbox].rate").length>0&&$(".db-form.v3 input[type=checkbox].rate + span").click(function(){var e=$(this).data("rate");$("input[type=checkbox]."+e).attr("checked",!1);var t=$(this).data("value");WDGFormsFunctions.setRateCheckboxes(e,t)})},initDatePickers:function(){$("input[type=text].adddatepicker").length>0&&$("input[type=text].adddatepicker").datepicker({dateFormat:"dd/mm/yy",yearRange:"-120:+10",regional:"fr",changeMonth:!0,changeYear:!0})},initTextInput:function(){$("input.format-number").each(function(){var e=$(this).val(),t=JSHelpers.formatNumber(JSHelpers.formatTextToNumber(e),"");$(this).val(t)}),$("input.format-number").change(function(){var e=$(this).val(),t=JSHelpers.formatNumber(JSHelpers.formatTextToNumber(e),"");$(this).val(t)})},initFileInput:function(){$(".field-file input").on("change",function(e){var t=$(this).next("label"),n=t.html(),i="";this.files&&this.files.length>1?i=(this.getAttribute("data-multiple-caption")||"").replace("{count}",this.files.length):e.target.value&&(i=e.target.value.split("\\").pop()),i?(t.find("span").html(i),t.find("span.hide-when-filled").hide()):t.html(n),t.show(),t.css("display","inline-block"),t.next(".displayed-responsive").hide(),WDGLightboxFunctions.hideAll()}),$("label.file-label").on("dragover",function(e){$(this).addClass("dragover"),e.stopPropagation(),e.preventDefault()}),$("label.file-label").on("dragleave",function(e){$(this).removeClass("dragover"),e.stopPropagation(),e.preventDefault()}),$("label.file-label").on("drop",function(e){e.stopPropagation(),e.preventDefault(),$(this).removeClass("dragover");var t=$(this).data("input");$("#"+t).prop("files",e.originalEvent.dataTransfer.files),$("#"+t).trigger("change")}),$("button.take-picture, button.import-file").click(function(e){e.stopPropagation(),e.preventDefault();var t=$(this).data("input-id");$(this).hasClass("take-picture")?($("#"+t).attr("accept","image/*"),$("#"+t).attr("capture","1")):($("#"+t).removeAttr("accept"),$("#"+t).removeAttr("capture")),$("#"+t).click()})},initSelectMultiple:function(){$(".select-multiple-items-retracted").click(function(){var e=$(this).siblings(".select-multiple-items");e.is(":visible")?$(this).removeClass("reverse"):$(this).addClass("reverse"),e.toggle(50)})},refreshSelectMultiple:function(e){for(var t=e.find("span.select-multiple-items-retracted-values")[0],n="",i=e.find("label.radio-label"),o=e.find("label.radio-label input"),a=i.length,r=0;r<a;r++)o[r].checked&&(""!==n&&(n+=", "),n+=$(i[r]).text());n=n.split("\n").join("").split("\t").join(""),$(t).text(n)},setRateCheckboxes:function(e,t){for(var n=1;n<=t;n++)$("input[type=checkbox]#"+e+"-"+n)[0].checked=!0;$("span#"+e+"-description").text($("input[type=checkbox]#"+e+"-"+t).data("description"))},postForm:function(e,t,n){$(e+" div.field").removeClass("error");var i={};if($(e).hasClass("has-files")?i=new FormData($(e)[0]):$(e+" input, "+e+" select, "+e+" textarea").each(function(){"checkbox"===$(this).attr("type")||"radio"===$(this).attr("type")?$(this).is(":checked")&&(i[$(this).attr("name")]=$(this).val()):i[$(this).attr("name")]=$(this).val()}),$(e).hasClass("has-files"))o={type:"POST",url:ajax_object.ajax_url,data:i,cache:!1,contentType:!1,processData:!1};else var o={type:"POST",url:ajax_object.ajax_url,data:i};$.ajax(o).done(function(i){var o=JSON.parse(i);if(void 0!=o.errors)for(var a=o.errors.length,r=0;r<a;r++){var s=o.errors[r];"general"==s.element?$(e+" span.form-error-general").html(s.text):($(e+" div#field-"+s.element).addClass("error"),$(e+" div#field-"+s.element+" span.field-error").html(s.text))}else $(e+"_success").length>0&&$(e+"_success").show();t(i,e,n)})},postFormCallback:function(result,formid,clickedButton){$(formid+" .loading").hide(),$(formid+" button.save").show(),$(formid+" button.previous").length>0&&$(formid+" button.previous").show();try{var jsonResult=JSON.parse(result);void 0!==jsonResult.errors&&0!==jsonResult.errors.length||(void 0!==$(clickedButton).data("close")&&""!==$(clickedButton).data("close")&&$("#wdg-lightbox-"+$(clickedButton).data("close")).hide(),void 0!==$(clickedButton).data("open")&&""!==$(clickedButton).data("open")&&$("#wdg-lightbox-"+$(clickedButton).data("open")).show())}catch(e){}var callbackFunctionName=$(clickedButton).data("callback");void 0!==callbackFunctionName&&""!==callbackFunctionName&&eval(callbackFunctionName)(result)}}}(jQuery);!function(e,t){"use strict";var n=function(e){this.elem=e};n.prototype={constructor:n,getValue:function(e){var t=this.elem.getAttribute("data-"+e);return void 0!==t&&null!==t&&t},share:function(){var e=this.getValue("sharer").toLowerCase(),t={facebook:{shareUrl:"https://www.facebook.com/sharer/sharer.php",params:{u:this.getValue("url")}},googleplus:{shareUrl:"https://plus.google.com/share",params:{url:this.getValue("url")}},linkedin:{shareUrl:"https://www.linkedin.com/shareArticle",params:{url:this.getValue("url"),mini:!0}},twitter:{shareUrl:"https://twitter.com/intent/tweet/",params:{text:this.getValue("title"),url:this.getValue("url"),hashtags:this.getValue("hashtags"),via:this.getValue("via")}},email:{shareUrl:"mailto:"+this.getValue("to"),params:{subject:this.getValue("subject"),body:this.getValue("title")+"\n"+this.getValue("url")},isLink:!0},whatsapp:{shareUrl:"whatsapp://send",params:{text:this.getValue("title")+" "+this.getValue("url")},isLink:!0},telegram:{shareUrl:"tg://msg_url",params:{text:this.getValue("title")+" "+this.getValue("url")},isLink:!0},viber:{shareUrl:"viber://forward",params:{text:this.getValue("title")+" "+this.getValue("url")},isLink:!0},line:{shareUrl:"http://line.me/R/msg/text/?"+encodeURIComponent(this.getValue("title")+" "+this.getValue("url")),isLink:!0},pinterest:{shareUrl:"https://www.pinterest.com/pin/create/button/",params:{url:this.getValue("url"),media:this.getValue("image"),description:this.getValue("description")}},tumblr:{shareUrl:"http://tumblr.com/widgets/share/tool",params:{canonicalUrl:this.getValue("url"),content:this.getValue("url"),posttype:"link",title:this.getValue("title"),caption:this.getValue("caption"),tags:this.getValue("tags")}},hackernews:{shareUrl:"https://news.ycombinator.com/submitlink",params:{u:this.getValue("url"),t:this.getValue("title")}},reddit:{shareUrl:"https://www.reddit.com/submit",params:{url:this.getValue("url")}},vk:{shareUrl:"http://vk.com/share.php",params:{url:this.getValue("url"),title:this.getValue("title"),description:this.getValue("caption"),image:this.getValue("image")}},xing:{shareUrl:"https://www.xing.com/app/user",params:{op:"share",url:this.getValue("url"),title:this.getValue("title")}},buffer:{shareUrl:"https://buffer.com/add",params:{url:this.getValue("url"),title:this.getValue("title"),via:this.getValue("via"),picture:this.getValue("picture")}},instapaper:{shareUrl:"http://www.instapaper.com/edit",params:{url:this.getValue("url"),title:this.getValue("title"),description:this.getValue("description")}},pocket:{shareUrl:"https://getpocket.com/save",params:{url:this.getValue("url")}},digg:{shareUrl:"http://www.digg.com/submit",params:{url:this.getValue("url")}},stumbleupon:{shareUrl:"http://www.stumbleupon.com/submit",params:{url:this.getValue("url"),title:this.getValue("title")}},flipboard:{shareUrl:"https://share.flipboard.com/bookmarklet/popout",params:{v:2,title:this.getValue("title"),url:this.getValue("url"),t:Date.now()}},weibo:{shareUrl:"http://service.weibo.com/share/share.php",params:{url:this.getValue("url"),title:this.getValue("title"),pic:this.getValue("image"),appkey:this.getValue("appkey"),ralateUid:this.getValue("ralateuid"),language:"zh_cn"}},renren:{shareUrl:"http://share.renren.com/share/buttonshare",params:{link:this.getValue("url")}},myspace:{shareUrl:"https://myspace.com/post",params:{u:this.getValue("url"),t:this.getValue("title"),c:this.getValue("description")}},blogger:{shareUrl:"https://www.blogger.com/blog-this.g",params:{u:this.getValue("url"),n:this.getValue("title"),t:this.getValue("description")}},baidu:{shareUrl:"http://cang.baidu.com/do/add",params:{it:this.getValue("title"),iu:this.getValue("url")}}}[e];return t&&(t.width=this.getValue("width"),t.height=this.getValue("height")),void 0!==t&&this.urlSharer(t)},urlSharer:function(t){var n,i=t.params||{},o=Object.keys(i),a=o.length>0?"?":"";for(n=0;n<o.length;n++)"?"!==a&&(a+="&"),i[o[n]]&&(a+=o[n]+"="+encodeURIComponent(i[o[n]]));if(t.shareUrl+=a,t.isLink)e.location.href=t.shareUrl;else{var r=t.width||600,s=t.height||480,c=e.innerWidth/2-r/2+e.screenX,l="scrollbars=no, width="+r+", height="+s+", top="+(e.innerHeight/2-s/2+e.screenY)+", left="+c,u=e.open(t.shareUrl,"",l);e.focus&&u.focus()}}},e.addEventListener("load",function(){function e(e){var t=e.currentTarget||e.srcElement;new n(t).share()}var i,o=t.querySelectorAll(".sharer"),a=o.length;for(i=0;a>i;i++)o[i].addEventListener("click",e)})}(window,document);